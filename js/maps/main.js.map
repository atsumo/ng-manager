{"version":3,"sources":["main.js","api/api-service.js","endpoint/endpoint-controller.js","endpoint/endpoint-service.js","auth/auth-service.js","entity/entity-controller.js","entity/entity-directive.js","entity/entity-filter.js","entity/entity-service.js","error/error-service.js","index/index-controller.js","i18n/messages.en.js","i18n/messages.ja.js","i18n/translate.js","login/login-controller.js","schema/schema-form.js","schema/schema-normalizer.js","schema/schema-validator.js","side/side-service.js","top/top-controller.js","util/date-picker.js"],"names":["angular","module","config","$routeProvider","$mdThemingProvider","$sceDelegateProvider","console","info","theme","primaryPalette","accentPalette","when","controller","templateUrl","resourceUrlWhitelist","run","$rootScope","$endpointService","$apiService","$errorService","$location","$authService","ep","getSelected","token","search","saveToken","url","login","checkLogin","setup","then","err","showError","factory","$q","$http","getUrl","path","replace","resolution","resolve","result","data","rejection","reject","msg","message","statusText","Error","status","get","query","method","params","post","put","del","getConfig","log","$emit","stack","inc","dec","request","requestError","response","responseError","$cookies","tokens","localStorage","getItem","JSON","parse","_","find","name","headerName","headers","$httpProvider","interceptors","push","$scope","$schemaForm","$filter","max_num","endpoints_org","getAll","endpoints","slice","remove","index","select","location","hash","add","endpoint","section","page","loadMore","length","file","document","getElementById","files","reader","FileReader","entities","readAsText","onload","e","target","error","i","filename","Date","content","stringify","window","requestFileSystem","webkitRequestFileSystem","TEMPORARY","fileSystem","root","getFile","create","exclusive","fileEntry","createWriter","fileWriter","blob","Blob","type","write","onwriteend","link","createElement","href","toURL","download","body","appendChild","click","removeChild","onerror","code","showForm","$event","showDialog","title","event","schema","properties","maxLength","minLength","format","style","required","submit","scope","deferred","defer","entity","promise","selected","this","save","splice","each","list","map","pick","setItem","logout","filter","item","findWhere","indexOf","t","$routeParams","$entityService","$schemaNormalizer","$window","isLoading","kind","limit","loadCount","isSearch","isFilter","filter_q","getFields","entityConfig","features","fields","keys","field","id","label","substr","getSearchSchema","searchSchema","rows","edit","row","editing","blur","setTimeout","resize","offset","concat","searchForm","toggleSearchform","toggled","rect","getBoundingClientRect","th","Math","floor","innerHeight","top","height","$on","directive","restrict","opening","open","close","$document","key","getKey","removing","$broadcast","cancelRemoving","off","$mdDialog","element","saving","orig","input","value","saveField","$digest","focus","bind","evt","keyCode","preview","openOpt","show","template","targetEvent","$compile","append","service","getEntityConfig","normalizeFields","opts","undefined","spec","_this","showSide","primaryKey","encodeURIComponent","join","import","export","$mdToast","toString","closeToast","hide","duration","position","$mdSidenav","$timeout","$interval","$translate","$translateLoader","toggleMenu","toggle","site","head","progress","mode","p","cancel","openRight","i18n","addTables","refresh","addEventListener","$translateLoaderProvider","translations","Add","Cancel","Close","Create","Endpoints","Entities","Name","Update","Modify","Remove","Search","Settings","Submit","Top","Add the endpoint","Entity configuration not found for {{kind}}","provider","tables","mergeTables","table","lang","merge","$get","options","newTables","$translateProvider","useLoader","determinePreferredLanguage","$sideContent","$schemaValidator","validator","errors","validate","forEach","hasError","submitter","interim","canceller","$new","$templateCache","linker","items","addClass","normalize","$$normalized","prop","keyOrder","formats","date-time","date","time","utc-millisec","isNaN","parseInt","regex","RegExp","color","uri","email","ipv4","ipv6","host-name","tv4","addFormat","test","val","validateMultiple","valid","keyPath","dataPath","split","shift","$rootElement","$mdTheming","$animate","lastScope","lastElement","$destroy","app","lineColor","textColor","mask","picker","$","css","call"],"mappings":"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","file":"main.js","sourcesContent":["'use strict';\n\nangular\n.module('ngManager', [\n  'ngRoute',\n  'ngAnimate',\n  'ngAria',\n  'ngMaterial',\n  'pascalprecht.translate',\n  'infinite-scroll',\n  'datePicker',\n  'ngCookies'\n])\n.config(function($routeProvider, $mdThemingProvider, $sceDelegateProvider) {\n\n  console.info('Configuring theme');\n  $mdThemingProvider.theme('menu')\n  .primaryPalette('indigo')\n  .accentPalette('orange')\n  ;\n  $mdThemingProvider.theme('endpoint')\n  .primaryPalette('indigo')\n  .accentPalette('orange')\n  ;\n  $mdThemingProvider.theme('entity')\n  .primaryPalette('indigo')\n  .accentPalette('orange')\n  ;\n  $mdThemingProvider.theme('login')\n  .primaryPalette('indigo')\n  .accentPalette('orange')\n  ;\n  $mdThemingProvider.theme('side')\n  .primaryPalette('teal')\n  .accentPalette('orange')\n  ;\n  $mdThemingProvider.theme('dialog')\n  .primaryPalette('indigo')\n  .accentPalette('orange')\n  ;\n  $mdThemingProvider.theme('previewDialog')\n  .primaryPalette('teal')\n  .accentPalette('orange')\n  ;\n\n  console.info('Configuring routings');\n\n  $routeProvider\n  .when('/endpoints', {\n    controller: 'EndpointCtrl',\n    templateUrl: 'endpoint.html'\n  })\n  .when('/top', {\n    controller: 'TopCtrl',\n    templateUrl: 'top.html'\n  })\n  .when('/entity/:kind', {\n    controller: 'EntityCtrl',\n    templateUrl: 'entity/index.html'\n  })\n  .when('/login', {\n    controller: 'LoginCtrl',\n    templateUrl: 'login.html'\n  })\n  ;\n\n  $sceDelegateProvider.resourceUrlWhitelist([\n    // Allow same origin resource loads.\n    'self',\n    // Allow loading from our assets domain.  Notice the difference between * and **.\n    '**'\n  ]);\n\n\n})\n.run(function($rootScope, $endpointService, $apiService, $errorService, $location, $authService) {\n\n  console.info('Started running ng-manager');\n\n  // Check last endpoints\n  var ep = $endpointService.getSelected();\n  if (!ep) {\n    // Select endpoints\n    $location.url('/endpoints');\n  } else {\n    var token = $location.search().token;\n    if(token){\n      $authService.saveToken(token,ep);\n      $location.url('/top');\n    }\n\n    $rootScope.login = $authService.checkLogin(ep);\n\n    $apiService\n    .setup()\n    .then(function() {\n      //location.hash = 'top';\n    }, function(err) {\n      $errorService.showError(err);\n    });\n  }\n})\n;\n\n","/* global _ */\nangular\n.module('ngManager')\n.factory('$apiService', function($q, $endpointService, $http, $rootScope) {\n\n  var config = null;\n\n  // Resolves URL from path data\n  var getUrl = function(path) {\n    var ep = $endpointService.getSelected();\n    var url = ep.url.replace(/(.*)\\/+$/,'$1');\n    path = path.replace(/^\\/+(.*)$/, '$1');\n    return url + '/' + path;\n  };\n\n  var resolution = function(resolve) {\n    return function(result) {\n      return resolve(result.data);\n    };\n  };\n\n  var rejection = function(reject) {\n    return function(result) {\n      var msg = (result.data && result.data.message) || result.statusText;\n      var err = new Error(msg);\n      err.status = status;\n      reject(err);\n    };\n  };\n\n  // sends GET request\n  var get = function(path, query) {\n    return $q(function(resolve, reject) {\n      $http({\n        url: getUrl(path),\n        method: 'GET',\n        params: query\n      })\n      .then(resolution(resolve), rejection(reject));\n    });\n  };\n\n  // sends POST request\n  // data will be stringified as JSON object\n  var post = function(path, data) {\n    return $q(function(resolve, reject) {\n      $http({\n        url: getUrl(path),\n        method: 'PUT',\n        data: data\n      })\n      .then(resolution(resolve), rejection(reject));\n    });\n  };\n\n  // sends PUT request\n  // data will be stringified as JSON object\n  var put = function(path, data) {\n    return $q(function(resolve, reject) {\n      $http({\n        url: getUrl(path),\n        method: 'PUT',\n        data: data\n      })\n      .then(resolution(resolve), rejection(reject));\n    });\n  };\n\n  var del = function(path, query) {\n    return $q(function(resolve, reject) {\n      $http({\n        url: getUrl(path),\n        method: 'DELETE',\n        params: query\n      })\n      .then(resolution(resolve), rejection(reject));\n    });\n  };\n\n  var search = function(path, query) {\n    return $q(function(resolve, reject) {\n      $http({\n        url: getUrl(path),\n        method: 'GET',\n        params: query\n      })\n      .then(resolution(resolve), rejection(reject));\n    });\n  };\n\n  var getConfig = function() {\n    return $q(function(resolve, reject) {\n      if (config !== null) {\n        resolve(config);\n      } else {\n        console.info('Getting config');\n        get('/config')\n        .then(\n          resolve,\n          reject\n        );\n      }\n    });\n  };\n\n  return {\n\n    setup: function() {\n      console.log('apiService.setup');\n      config = null;\n      return getConfig().then(function(data) {\n        config = data;\n        console.log(config);\n        $rootScope.$emit('config', config);\n        return config;\n      }, function(err) {\n        return err;\n      });\n    },\n\n    getConfig: function() {\n      return config;\n    },\n\n    get: get,\n\n    post: post,\n\n    put: put,\n\n    del: del,\n\n    search: search\n\n  };\n})\n.factory('progressHttpInterceptor', function($rootScope, $q) {\n  var stack = 0;\n  var inc = function() {\n    if (stack++ === 0) {\n      $rootScope.$emit('progress.start');\n    }\n  };\n  var dec = function() {\n    if (--stack === 0) {\n      stack = 0;\n      $rootScope.$emit('progress.end');\n    }\n  };\n\n  return {\n    request: function(config) {\n      inc();\n      return config || $q.when(config);\n    },\n    requestError: function(rejection) {\n      dec();\n      return $q.reject(rejection);\n    },\n    response: function(response) {\n      dec();\n      return response || $q.when(response);\n    },\n    responseError: function(rejection) {\n      dec();\n      return $q.reject(rejection);\n    }\n  };\n})\n.factory('authHttpInterceptor', function ($q, $rootScope, $location, $endpointService, $cookies) {\n  return {\n    'request': function(config) {\n      var ep = $endpointService.getSelected();\n\n      if (!ep) {\n        return config || $q.when(config);\n      }\n\n      var tokens = [];\n      var data = localStorage.getItem('tokens');\n      if(data){\n        tokens = JSON.parse(data);\n      }\n\n      var token = _.find(tokens, { 'name': ep.name });\n      var headerName = 'X-XSRF-TOKEN';\n      if (token) {\n        config.headers[headerName] = token.token;\n      }\n\n      if ($cookies['XSRF-TOKEN']) {\n        delete $cookies['XSRF-TOKEN'];\n      }\n\n      return config || $q.when(config);\n    },\n    'responseError': function(rejection) {\n      var status = rejection.status;\n      console.log(status);\n      if (status === 401) {\n        $location.path('/login');\n      }\n      return $q.reject(rejection);\n    }\n  };\n})\n.config(function ($httpProvider) {\n  $httpProvider.interceptors.push('progressHttpInterceptor');\n  $httpProvider.interceptors.push('authHttpInterceptor');\n})\n;\n\n","angular\n.module('ngManager')\n.controller('EndpointCtrl', function( $q, $scope, $rootScope, $schemaForm, $endpointService, $apiService, $errorService, $filter) {\n\n    var max_num = 3;\n    $scope.endpoints_org = $endpointService.getAll();\n    $scope.endpoints = $scope.endpoints_org.slice(0, max_num);\n\n    $scope.remove = function(index) {\n      $endpointService.remove(index);\n    };\n\n    $scope.select = function(index) {\n      $endpointService.select(index);\n      $apiService\n      .setup()\n      .then(function() {\n        location.hash = 'top';\n      }, function(err) {\n        $errorService.showError(err);\n      })\n      ;\n    };\n\n    var add = function(endpoint) {\n      $endpointService.add(endpoint);\n    };\n\n    $rootScope.$emit('content.title', {\n      section: 'Settings',\n      page: 'Endpoints'\n    });\n\n    $scope.loadMore = function(){\n      if(max_num < $scope.endpoints_org.length){\n        max_num++;\n        $scope.endpoints = $scope.endpoints_org.slice(0, max_num);\n      }\n    };\n\n    $scope.import = function(){\n      var file = document.getElementById(\"importfile\").files[0];\n      var reader = new FileReader();\n      var entities = null;\n      reader.readAsText(file, \"utf-8\");\n      reader.onload = function(e){\n        try{\n          entities = JSON.parse(e.target.result);\n        } catch(error) {\n          //todo error\n        }\n        if(entities !== null){\n          for(var i = 0; i < entities.length; i++){\n            $endpointService.add(entities[i]);\n          }\n        }\n      };\n    };\n\n    $scope.export = function(){\n\n      var filename = \"endpoint_\" + $filter('date')(new Date(), 'yyyyMMddHHmm') + \".json\";\n      var content = JSON.stringify($scope.endpoints_org);\n      window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;\n      window.requestFileSystem(window.TEMPORARY, 1024*1024, function(fileSystem){\n        // ファイル新規作成（上書き）\n        fileSystem.root.getFile(filename, {create: true, exclusive: false}, function(fileEntry){\n          // ファイル書き込み\n          fileEntry.createWriter(function(fileWriter){\n            var blob = new Blob([ content ], { \"type\" : \"text/plain\" });\n            fileWriter.write(blob);\n            // ファイル書き込み成功イベント\n            fileWriter.onwriteend = function(){\n              console.log(\"ファイル書き込み成功\");\n              var link = document.createElement('a');\n              link.href = fileEntry.toURL();\n              link.download = filename;\n              document.body.appendChild(link); // for Firefox\n              link.click();\n              document.body.removeChild(link); // for Firefox\n            };\n            // ファイル書き込み失敗イベント\n            fileWriter.onerror = function(e){\n              console.err(e);\n            };\n          });\n        }, function(error){\n            console.log(\"error.code=\" + error.code);\n        });\n      });\n    };\n\n    // Showing form for adding new schema\n    $scope.showForm = function($event) {\n\n      $schemaForm.showDialog({\n        title: 'Add the endpoint',\n        event: $event,\n        schema: {\n          type: 'object',\n          properties: {\n            name: { type: 'string', maxLength: 100, minLength: 1 },\n            url: { type: 'string', maxLength: 100, minLength: 1, format: 'uri', style: 'long' },\n          },\n          required: ['name','url']\n        },\n        submit: function(scope) {\n          var deferred = $q.defer();\n          var entity = scope.entity;\n          add(entity);\n          deferred.resolve();\n          return deferred.promise;\n        }\n      });\n\n    };\n\n  }\n);\n","/* global _ */\nangular\n.module('ngManager')\n.factory('$endpointService', function() {\n\n  var endpoints = [];\n  var data = localStorage.getItem(\"endpoints\");\n  if (data) {\n    endpoints = JSON.parse(data);\n  }\n\n  return {\n\n    getAll: function() {\n      return endpoints;\n    },\n\n    getSelected: function() {\n      return _.find(endpoints, function(ep) {\n        return ep.selected === true;\n      });\n    },\n\n    get: function(index) {\n      return endpoints[index];\n    },\n\n    add: function(endpoint) {\n      endpoints.push(endpoint);\n      this.save();\n    },\n\n    remove: function(index) {\n      endpoints.splice(index, 1);\n      this.save();\n    },\n\n    select: function(index) {\n      _.each(endpoints, function(ep, i) {\n        if (i === index) {\n          ep.selected = true;\n        } else {\n          delete ep.selected;\n        }\n      });\n      this.save();\n    },\n\n    save: function() {\n      var list = _.map(endpoints, function(ep) {\n        return _.pick(ep, 'name', 'url', 'selected');\n      });\n      localStorage.setItem('endpoints', JSON.stringify(list));\n    }\n  };\n\n});\n\n","/* global _ */\nangular\n.module('ngManager')\n.factory('$authService', function($q, $location, $rootScope, $endpointService, $apiService) {\n\n  var tokens = [];\n  var data = localStorage.getItem('tokens');\n  if(data){\n    tokens = JSON.parse(data);\n  }\n\n  var logout = function(){\n\n    var ep = $endpointService.getSelected();\n\n    if(!ep){\n      return;\n    } else {\n      $apiService.get('/logout').then(function(){\n        tokens = _.filter(tokens, function(token){\n          return (token.name !== ep.name);\n        });\n        localStorage.setItem('tokens', JSON.stringify(tokens));\n        $rootScope.login = checkLogin(ep);\n      })\n      ;\n    }\n  };\n\n  var saveToken = function(token,ep){\n\n    // Update Token if exist\n    var item = _.findWhere(tokens, { 'name': ep.name });\n    if(item){\n      tokens[tokens.indexOf(item)].token = token;\n    } else {\n      tokens.push({\n        name: ep.name,\n        token: token\n      });\n    }\n\n    //save to local strage\n    var list = _.map(tokens, function(t) {\n      return _.pick(t, 'name', 'token');\n    });\n    localStorage.setItem('tokens', JSON.stringify(list));\n\n  };\n\n  var checkLogin = function(ep){\n    var list = _.find(tokens, function(t){\n      return t.name === ep.name;\n    });\n    return list;\n  };\n\n  return {\n\n    logout: logout,\n    \n    saveToken: saveToken,\n    \n    checkLogin: checkLogin\n\n  };\n\n})\n;\n\n","/* global _ */\nangular\n.module('ngManager')\n.controller('EntityCtrl', function(\n  $q,\n  $scope,\n  $routeParams,\n  $rootScope,\n  $schemaForm,\n  $entityService,\n  $errorService,\n  $schemaNormalizer,\n  $window) {\n\n    var kind = $routeParams.kind;\n    var limit = 30;\n    var loadCount = 1;\n    var isLoading;\n    var isSearch = false;\n    var isFilter = false;\n\n    console.info('Entity', kind);\n\n    $rootScope.$emit('content.title', {\n      section: 'Entities',\n      page: kind\n    });\n\n    $scope.kind = kind;\n    $scope.filter_q = {};\n\n    var getFields = function(entityConfig) {\n      var features = entityConfig.features;\n      var schema = entityConfig.schema;\n      var fields = features.list && features.list.fields || _.keys(schema.properties);\n      return fields.map(function(field) {\n        if (typeof field === 'string') {\n          field = { id: field, label: field };\n        }\n        field.label = field.label || field.id;\n        if (field.label.indexOf('.') >= 0) {\n          field.label = field.id.substr(field.label.indexOf('.')+1);\n        } else {\n          field.label = field.id;\n        }\n        return field;\n      });\n    };\n\n    var getSearchSchema = function(entityConfig) {\n      // TODO : normalize\n      var schema = entityConfig.features.search && entityConfig.features.search.schema || {};\n      return $schemaNormalizer(schema);\n    };\n\n    $scope.list = function() {\n\n      isLoading = true;\n\n      $entityService.list({\n        kind: kind\n      }).then(function(data) {\n\n        // Get entity schema\n        var entityConfig = $entityService.getConfig(kind);\n        var fields = getFields(entityConfig);\n        var searchSchema = getSearchSchema(entityConfig);\n\n        $scope.fields = fields;\n        $scope.schema = entityConfig.schema;\n        $scope.rows = data.list;\n        $scope.searchSchema = searchSchema;\n\n        loadCount = data.list.length;\n\n        $scope.edit = function(row, id) {\n          row.editing = id;\n        };\n\n        $scope.blur = function(row) {\n          delete row.editing;\n        };\n\n        // update size after applying list\n        setTimeout(resize, 0);\n\n        isLoading = false;\n\n      }, function(err) {\n        $errorService.showError(err);\n      });\n    };\n\n    $scope.loadMore = function(){\n      if(isLoading || isSearch || isFilter) return;\n\n      var offset = loadCount;\n      isLoading = true;\n\n      $entityService.list({\n        kind: kind,\n        limit: limit,\n        offset: offset\n      }).then(function(data) {\n        if ( data.list.length !== 0 ) {\n          loadCount += data.list.length;\n          $scope.rows = $scope.rows.concat(data.list);\n        }\n        isLoading = false;\n      }, function(err) {\n        $errorService.showError(err);\n      });\n    };\n\n    $scope.export = function(){\n      $entityService.export(kind,$scope.rows);\n    };\n\n    $scope.import = function(){\n      $entityService.import(kind);\n    };\n\n    $scope.search = function(){\n      var query = $scope.searchForm;\n      $entityService.search({\n        kind: kind,\n        query: query\n      }).then(function(data) {\n        if ( data.list.length !== 0 ) {\n          $scope.rows = data.list;\n          isSearch = true;\n        }\n      }, function(err) {\n        $errorService.showError(err);\n      });\n    };\n\n    $scope.toggleSearchform = function(){\n\n      if(!$scope.searchForm){\n        $scope.searchForm = {};\n      }\n\n      if(!$scope.toggled){\n        $scope.toggled = true;\n      } else {\n        $scope.toggled = !$scope.toggled;\n      }\n    };\n\n    $scope.filter = function(){\n      $entityService.filter({\n        kind: kind,\n        query: $scope.filter_q\n      }).then(function(data) {\n        $scope.rows = data.list;\n        isFilter = true;\n      }, function(err) {\n        $errorService.showError(err);\n      });\n    };\n\n    var resize = function() {\n      var body = document.getElementById('entity-table-body');\n      var rect = body.getBoundingClientRect();\n      // get body height\n      var th = Math.floor($window.innerHeight - rect.top);\n      body.style.height = th + 'px';\n    };\n\n    $scope.$on('window.resize', resize);\n\n    $scope.list();\n\n})\n;\n\n","/* global _ */\nangular\n.module('ngManager')\n.directive('entityTable', function($entityService) {\n\n  return {\n    restrict: 'AE',\n    link: function(scope) {\n\n      var kind = scope.kind;\n\n      scope.add = function() {\n        $entityService.showForm({ kind: kind }, function(data) {\n        });\n      };\n\n      scope.$on('entity.removed', function(e, data) {\n        var rows = scope.rows;\n        rows.splice(rows.indexOf(data.row), 1);\n      });\n\n    },\n    templateUrl: 'entity/table.html'\n  };\n\n})\n.directive('headCell', function() {\n\n  return {\n\n    restrict: 'AE',\n    scope: false,\n    replace: true,\n    link: function(scope) {\n\n      scope.opening = '';\n\n      scope.open = function(){\n        scope.opening = 'is_open';\n      };\n\n      scope.close = function(){\n        scope.opening = '';\n      };\n      \n      scope.blur = function(){\n        scope.opening = '';\n      };\n\n    },\n    templateUrl: 'entity/head-cell.html'\n\n  };\n\n})\n.directive('entityRow', function($entityService, $errorService, $document, $rootScope) {\n\n  return {\n\n    restrict: 'AE',\n    scope: {\n      row: '=',\n      fields: '=',\n      kind: '='\n    },\n    replace: true,\n    link: function(scope) {\n\n      var kind = scope.kind;\n      var row = scope.row;\n\n      scope.key = $entityService.getKey({ kind: kind, entity: row });\n\n      // show modification form\n      scope.edit = function() {\n\n        $entityService\n        .get({ kind: kind, key: scope.key })\n        .then(function(data) {\n          $entityService.showForm({\n            kind: kind,\n            key: scope.key,\n            entity: data\n          }).then(function() {\n            scope.row = data;\n          });\n        }, function(err) {\n          $errorService.showError(err);\n        });\n\n      };\n\n      // remove the entity of the row\n      scope.remove = function() {\n\n        if (scope.removing) {\n\n          var key = $entityService.getKey({ kind: kind, entity: row });\n\n          $entityService\n          .remove({ kind: kind, key: key })\n          .then(function() {\n            $rootScope.$broadcast('entity.removed', {\n              kind: kind,\n              key: key,\n              row: row\n            });\n          }, function(err) {\n            $errorService.showError(err);\n          });\n\n        } else {\n\n          scope.removing = true;\n\n        }\n\n      };\n\n      scope.cancelRemoving = function() {\n        delete scope.removing;\n      };\n\n      scope.$on('$destroy', function() {\n        $document.off('click', scope.cancelRemoving);\n      });\n\n    },\n    templateUrl: 'entity/row.html'\n\n  };\n\n})\n.directive('entityCell', function($entityService, $mdDialog) {\n\n  return {\n\n    restrict: 'AE',\n    scope: {\n      field: '=',\n      key: '=',\n      row: '=',\n      kind: '='\n    },\n    replace: true,\n    link: function(scope, element) {\n\n      var kind = scope.kind;\n      var row = scope.row;\n      var field = scope.field;\n      var key = scope.key;\n\n      scope.edit = function() {\n        scope.editing = true;\n        setTimeout(function() {\n\n          var save = function() {\n            scope.saving = true;\n            scope.error = false;\n            if (typeof orig === 'string') {\n              row[field.id] = input[0].value;\n            } else {  \n              try {\n                row[field.id] = JSON.parse(input[0].value);\n              } catch (err) {\n                console.log(\"ERROR. JSON.parse failed\");\n                scope.error = err;\n                scope.saving = false;\n                return;\n              }\n            }\n            // TODO : validation\n\n            $entityService.saveField({\n              kind: kind,\n              key: key,\n              field: field.id,\n              value: row[field.id]\n            }).then(function() {\n              scope.saving = false;\n            }, function(err) {\n              scope.saving = false;\n              scope.error = err;\n            });\n            scope.$digest();\n          };\n\n          var input = element.find('input');\n          input.focus();\n          var orig = row[field.id];\n          input.bind('keyup', function(evt) {\n            switch (evt.keyCode) {\n              case 27: // ESC\n                row[field.id] = orig;\n                scope.$digest();\n                input.blur();\n                break;\n              case 13: // ENTER\n                save();\n                input.blur();\n                break;\n            }\n          });\n          input.bind('blur', function() {\n            if (orig !== row[field.id]) {\n              // Saving new value?\n              // save();\n            }\n          });\n        }, 0);\n      };\n\n      if(field.preview){\n        scope.openOpt = function(){\n          $mdDialog.show({\n            template: '<md-dialog md-theme=\"previewDialog\" aria-label=\"Preview dialog\"><preview-dialog /></md-dialog>',\n            targetEvent: event,\n            controller: ['$scope', function($scope) {\n              $scope.field = field;\n              $scope.row = row;\n              $scope.kind = kind;\n            }]\n          });\n        };\n      }\n\n      scope.blur = function() {\n        scope.editing = false;\n      };\n\n    },\n    templateUrl: 'entity/cell.html'\n\n  };\n\n})\n.directive('previewDialog', function() {\n\n  return {\n\n    restrict: 'AE',\n    templateUrl: 'entity/preview-dialog.html'\n\n  };\n\n})\n.directive('previewItem', function($compile) {\n\n  return {\n\n    restrict: 'AE',\n    link: function(scope, element) {\n      var field = scope.field;\n      var data = scope.row;\n\n      var template = '';\n      var url = field.preview.url.replace(/\\{.+?\\}/, data[field.id]);\n\n      switch (field.preview.type) {\n        case 'image':\n          template = '<img src=\"'+url+'\" />';\n          break;\n        case 'video':\n          template = '<video controls autoplay><source src=\"'+url+'\"></video>';\n          break;\n      }\n      var content = $compile(angular.element(template))(scope);\n      element.append(content);\n    }\n\n  };\n\n})\n;\n\n","angular\n.module('ngManager')\n.filter('viewfilter', function ($filter) {\n  return function (input, type, format) {\n\n    if(typeof(input) === 'object'){\n      input = JSON.stringify(input);\n    }\n\n    switch(type){\n      case 'date':\n        format = format || 'medium';\n        return $filter('date')(input,format);\n\n      // add custom type here\n      // case 'foo': return var\n\n      default:\n        return input;\n    }\n  };\n});","/* global _ */\nangular\n.module('ngManager')\n.service('$entityService', function($q, $apiService, $schemaForm, $filter) {\n\n  var getEntityConfig = function(kind) {\n    return _.find($apiService.getConfig().entities, function(entity) {\n      return entity.id === kind;\n    });\n  };\n\n  // normalize data fields\n  var normalizeFields = function(data) {\n\n    var features = data.features || {};\n\n    var fields = (features.list && features.list.fields) || _.keys(data.schema.properties);\n\n    return _.map(fields, function(field) {\n      if (typeof field === 'string') {\n        return { id: field };\n      } else {\n        return field;\n      }\n    });\n\n  };\n\n  return {\n\n    getConfig: getEntityConfig,\n\n    list: function(opts) {\n\n      opts = opts || {};\n\n      var deferred = $q.defer();\n\n      var kind = opts.kind || '';\n      var limit = opts.limit || 30;\n      var offset = opts.offset || 0;\n\n      if (kind === '') {\n        deferred.reject(new Error('Kind is empty'));\n        return deferred.promise;\n      }\n\n      $apiService\n      .get('/entity/'+kind, {\n        limit: limit,\n        offset: offset\n      })\n      .then(function(data) {\n\n        var config = getEntityConfig(kind);\n        if (config === undefined) {\n          deferred.reject({\n            message: 'Entity configuration not found for {{kind}}',\n            params: { kind: kind }\n          });\n        } else {\n          data.fields = normalizeFields(config);\n          deferred.resolve(data);\n        }\n\n      }, function(err) {\n        deferred.reject(err);\n      })\n      ;\n\n      return deferred.promise;\n\n    },\n\n    get: function(opts) {\n\n      opts = opts || {};\n\n      return $q(function(resolve, reject) {\n\n        var kind = opts.kind || '';\n        if (kind === '') {\n          return reject(new Error('kind is empty'));\n        }\n\n        var key = opts.key;\n        if (key === undefined) {\n          return reject(new Error('key is null'));\n        }\n\n        $apiService\n        .get('/entity/'+kind+'/'+key)\n        .then(function(data) {\n          var config = getEntityConfig(kind);\n          if (config === undefined) {\n            reject({\n              message: 'Entity configuration not found for {{kind}}',\n              params: { kind: kind }\n            });\n          } else {\n            resolve(data);\n          }\n        }, reject);\n      });\n    },\n\n    showForm: function(opts) {\n\n      var kind = opts.kind;\n      var key = opts.key;\n      var entity = opts.entity || {};\n      var spec = getEntityConfig(kind);\n      var _this = this;\n      var submit = function() {\n        if(!key){\n          key = _this.getKey({\n            kind: kind,\n            entity: entity\n          });\n        }\n        return $apiService.put('/entity/'+kind+'/'+key, entity);\n      };\n\n      return $schemaForm.showSide({\n        schema: spec.schema,\n        entity: entity,\n        submit: submit\n      });\n    },\n\n    getKey: function(opts) {\n      var kind = opts.kind;\n      var entity = opts.entity;\n      var spec = getEntityConfig(kind);\n      var keys = spec.schema.primaryKey;\n      var key = keys.map(function(key) {\n        return encodeURIComponent(entity[key]);\n      }).join(',');\n      return key;\n    },\n\n    saveField: function(opts) {\n\n      var kind = opts.kind;\n      var key = opts.key;\n      var field = opts.field;\n      var value = opts.value;\n\n      return $apiService\n      .put('/entity/'+kind+'/'+key+'/'+field, { value: value })\n      ;\n\n    },\n\n    remove: function(opts) {\n\n      var kind = opts.kind;\n      var key = opts.key;\n\n      return $apiService.del('/entity/'+kind+'/'+key);\n    },\n\n    search: function(opts) {\n\n      return $q(function(resolve, reject) {\n\n        var kind = opts.kind;\n        if (kind === '') {\n          return reject(new Error('kind is empty'));\n        }\n\n        var query = opts.query || '';\n        if (query === '') {\n          return reject(new Error('query is null'));\n        }\n\n        $apiService\n        .get('/search/entity/'+kind, {\n          query: query,\n          limit: -1,\n          offset: 0\n        })\n        .then(function(data) {\n          var config = getEntityConfig(kind);\n          if (config === undefined) {\n            reject({\n              message: 'Entity configuration not found for {{kind}}',\n              params: { kind: kind }\n            });\n          } else {\n            resolve(data);\n          }\n        }, reject);\n      });\n    },\n\n\n    filter: function(opts) {\n      return $q(function(resolve, reject) {\n\n        var kind = opts.kind;\n        if (kind === '') {\n          return reject(new Error('kind is empty'));\n        }\n\n        var query = opts.query || '';\n        if (query === '') {\n          return reject(new Error('query is null'));\n        }\n\n        $apiService\n        .get('/filter/entity/'+kind, {\n          query: query,\n          limit: -1,\n          offset: 0\n        })\n        .then(function(data) {\n          var config = getEntityConfig(kind);\n          if (config === undefined) {\n            reject({\n              message: 'Entity configuration not found for {{kind}}',\n              params: { kind: kind }\n            });\n          } else {\n            resolve(data);\n          }\n        }, reject);\n      });\n    },\n\n    import: function(kind){\n      var _this = this;\n      var file = document.getElementById(\"importfile\").files[0];\n      var reader = new FileReader();\n      var entities = null;\n      reader.readAsText(file, \"utf-8\");\n\n      reader.onload = function(e){\n\n        try{\n          entities = JSON.parse(e.target.result);\n        } catch(error) {\n          console.err(error);\n        }\n\n        // TODO: validation\n\n        if(entities !== null){\n          for(var i = 0; i < entities.length; i++){\n            var key = _this.getKey({\n              kind: kind,\n              entity: entities[i]\n            });\n            $apiService.put('/entity/'+kind+'/'+key, entities[i]);\n          }\n        }\n\n      };\n\n    },\n\n    export: function(kind){\n\n      this.list({\n        kind: kind,\n        limit: -1 // getAll\n      })\n      .then(function(data) {\n        var rows = data.list;\n        var filename = kind+ \"_\" + $filter('date')(new Date(), 'yyyyMMddHHmm') + \".json\";\n        var content = JSON.stringify(rows);\n        window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;\n        window.requestFileSystem(TEMPORARY, 1024*1024, function(fileSystem){\n          // create\n          fileSystem.root.getFile(filename, {create: true, exclusive: false}, function(fileEntry){\n            // write\n            fileEntry.createWriter(function(fileWriter){\n              var blob = new Blob([ content ], { \"type\" : \"text/plain\" });\n              fileWriter.write(blob);\n              // success\n              fileWriter.onwriteend = function(e){\n                console.info(\"writing success\");\n                var link = document.createElement('a');\n                link.href = fileEntry.toURL();\n                link.download = filename;\n                document.body.appendChild(link); // for Firefox\n                link.click();\n                document.body.removeChild(link); // for Firefox\n              };\n              // failed\n              fileWriter.onerror = function(e){\n                console.log(\"writing failed\");\n              };\n            });\n          }, function(error){\n              console.log(\"error : \" + error.code);\n          });\n        });\n      });\n    }\n  };\n\n})\n;\n\n","angular\n.module('ngManager')\n.factory('$errorService', function($mdToast) {\n\n  var showError = function(err) {\n    var msg = '';\n    if (typeof err === 'string') {\n      msg = err;\n    } else if (err.message) {\n      msg = err.message;\n    } else if (err) {\n      msg = err.toString();\n    } else {\n      msg = 'Unknown Error';\n    }\n\n    $mdToast.show({\n      controller: ['$scope', function($scope) {\n        $scope.message = msg;\n        $scope.params = err.params || {};\n        $scope.closeToast = function() {\n          $mdToast.hide();\n        };\n      }],\n      templateUrl: 'toasts/error.html',\n      duration: 6000,\n      position: 'top right'\n    });\n  };\n\n  return {\n\n    showError: showError,\n\n  };\n\n})\n;\n","\nangular\n.module('ngManager')\n.controller('IndexCtrl', function(\n  $scope,\n  $rootScope,\n  $mdSidenav,\n  $timeout,\n  $interval,\n  $location,\n  $window,\n  $translate,\n  $translateLoader,\n  $endpointService,\n  $authService) {\n\n    $scope.toggleMenu = function() {\n      $timeout(function() {\n        $mdSidenav('left-menu').toggle();\n      });\n    };\n\n    $scope.site = { title: 'NG-Manager' };\n\n    $scope.head = { title: '' };\n\n    $rootScope.$on('content.title', function(evt, title) {\n      $scope.head.title = title;\n    });\n\n    $rootScope.$on('$locationChangeSuccess', function() {\n      $scope.hash = location.hash;\n      $mdSidenav('left-menu').close();\n    });\n\n    $rootScope.$on('progress.start', function() {\n      $scope.progress = { mode: 'query', value: 0 };\n    });\n\n    $rootScope.$on('progress.end', function() {\n      var progress = $scope.progress;\n      if (progress.mode === 'query') {\n        $timeout(function() {\n          $scope.progress = false;\n        }, 500);\n      } else if (progress.mode === 'determinate') {\n        var p = $interval(function() {\n          progress.value += 20;\n          if (progress.value >= 100) {\n            $interval.cancel(p);\n            $timeout(function() {\n              delete $scope.progress;\n            }, 400);\n          }\n        }, 50);\n      }\n    });\n\n    $scope.openRight = true;\n\n    $rootScope.$on('config', function(evt, config) {\n      console.info('Loaded configuration', config);\n      $scope.config = config;\n      $scope.site = config.site;\n\n      if (config.i18n) {\n        $translateLoader.addTables(config.i18n);\n        $translate.refresh();\n      }\n    });\n\n    $window.addEventListener('resize', function() {\n      $rootScope.$broadcast('window.resize');\n    });\n\n    $scope.logout = function(){\n\n      $authService.logout();\n      $location.url('/login');\n\n    };\n});\n","angular\n.module('ngManager')\n.config(function($translateLoaderProvider) {\n\n  $translateLoaderProvider.translations('en', {\n    name: 'Name',\n    url: 'URL'\n  });\n\n})\n;\n","angular\n.module('ngManager')\n.config(function($translateLoaderProvider) {\n\n  $translateLoaderProvider.translations('ja', {\n    // Words\n    Add: '追加',\n    Cancel: 'キャンセル',\n    Close: '閉じる',\n    Create: '作成',\n    Endpoints: 'エンドポイント',\n    Entities: 'データ',\n    Name: '名前',\n    Update: '更新',\n    Modify: '編集',\n    Remove: '削除',\n    Search: '検索',\n    Settings: '設定',\n    Submit: '送信',\n    Top: 'トップ',\n    // Labels\n    name: '名前',\n    url: 'URL',\n    // Sentences\n    'Add the endpoint': 'エンドポイント追加',\n\n    'Entity configuration not found for {{kind}}': '{{kind}}のデータ設定が見つかりません'\n  });\n\n})\n;\n\n","angular\n.module('ngManager')\n.provider('$translateLoader', function() {\n\n  var tables = {};\n\n  var mergeTables = function(table, lang) {\n    var map = tables[lang];\n    if (!map) {\n      map = tables[lang] = {};\n    }\n    tables[lang] = _.merge(table, map);\n  };\n\n  this.translations = function(lang, table) {\n    mergeTables(table, lang);\n  };\n\n  this.$get = function($q) {\n\n    var service = function(options) {\n      var key = options.key;\n      var deferred = $q.defer();\n      deferred.resolve(tables[key] || {});\n      return deferred.promise;\n    };\n\n    service.addTables = function(newTables) {\n      _.each(newTables, mergeTables);\n    };\n\n    return service;\n  };\n})\n.config(function($translateProvider) {\n  $translateProvider.useLoader('$translateLoader');\n  $translateProvider.determinePreferredLanguage();\n});\n\n\n","angular\n.module('ngManager')\n.controller('LoginCtrl', function($scope, $rootScope, $endpointService) {\n\n  $rootScope.$emit('content.title', {\n    section: 'Login'\n  });\n\n  $scope.getUrl = function(path) {\n    var ep = $endpointService.getSelected();\n    var url = ep.url.replace(/(.*)\\/+$/,'$1');\n    path = path.replace(/^\\/+(.*)$/, '$1');\n    return url + '/' + path;\n  };\n\n})\n;\n","angular\n.module('ngManager')\n.factory('$schemaForm', function(\n  $mdDialog,\n  $rootScope,\n  $sideContent,\n  $schemaNormalizer,\n  $schemaValidator,\n  $q) {\n\n  var validator = function(scope) {\n    return function(path) {\n      var errors = $schemaValidator.validate(scope.entity, scope.schema);\n      if (errors) {\n        errors.forEach(function(err) {\n          scope.errors[err.path] = err.message;\n        });\n        scope.hasError = true;\n      } else {\n        if (path) {\n          delete scope.errors[path];\n        } else {\n          scope.errors = {};\n        }\n        scope.hasError = false;\n      }\n    };\n  };\n\n  var submitter = function(scope, interim, submit, deferred) {\n    return function() {\n      scope.validate();\n      if (scope.hasError) {\n        return;\n      }\n      if (!submit) {\n        interim.hide();\n        deferred.reject();\n      }\n      submit(scope).then(function() {\n        interim.hide();\n        deferred.resolve(scope.entity);\n      }, function(err) {\n        deferred.reject(err);\n      });\n    };\n  };\n\n  var canceller = function(scope, interim, deferred) {\n    return function() {\n      interim.hide();\n      deferred.reject();\n    };\n  };\n\n  return {\n    showDialog: function(opts) {\n\n      opts = opts || {};\n\n      var schema = opts.schema;\n      var entity = opts.entity || {};\n      var event = opts.event;\n      var deferred = $q.defer();\n      var submit = opts.submit;\n      var theme = opts.theme || 'dialog';\n      // normalize schea\n      schema = $schemaNormalizer(schema);\n\n      $mdDialog.show({\n        template: '<md-dialog md-theme=\"'+theme+'\"><schema-form /></md-dialog>',\n        targetEvent: event,\n        controller: ['$scope', function($scope) {\n          $scope.schema = schema;\n          $scope.entity = entity;\n          $scope.title = opts.title || '';\n          $scope.errors = {};\n          $scope.validate = validator($scope);\n          $scope.submit = submitter($scope, $mdDialog, submit, deferred);\n          $scope.cancel = canceller($scope, $mdDialog, deferred);\n        }]\n      });\n\n      return deferred.promise;\n    },\n\n    showSide: function(opts) {\n\n      var schema = opts.schema;\n      var entity = opts.entity || {};\n      var deferred = $q.defer();\n      var submit = opts.submit;\n\n      // normalize schea\n      schema = $schemaNormalizer(schema);\n\n      var scope = $rootScope.$new();\n      scope.schema = schema;\n      scope.entity = entity;\n      scope.errors = {};\n      scope.validate = validator(scope);\n\n      var interim = $sideContent(scope);\n\n      scope.submit = submitter(scope, interim, submit, deferred);\n      scope.cancel = canceller(scope, interim, deferred);\n\n      interim.show();\n\n      return deferred.promise;\n    }\n\n  };\n\n})\n.directive('schemaForm', function() {\n\n  return {\n    restrict: 'AE',\n    templateUrl: 'schema-form/form.html'\n  };\n\n})\n.directive('schemaItem', function($compile, $templateCache) {\n\n  var linker = function(scope, element) {\n\n    var schema = scope.schema;\n    var template = \"\";\n    switch(schema.type) {\n      case 'string':\n        if (schema.enum) {\n          template = $templateCache.get('schema-form/input_radio.html');\n        }else{\n          template = $templateCache.get('schema-form/input.html');\n        }\n        break;\n      case 'boolean':\n        template = $templateCache.get('schema-form/input_boolean.html');\n        break;\n      case 'number':\n        template = $templateCache.get('schema-form/input_number.html');\n        break;\n      case 'object':\n        scope.entity[scope.schema.path] = scope.entity[scope.schema.path] || {};\n        template = $templateCache.get('schema-form/input_object.html');\n        break;\n      case 'array':\n        if (schema.items && schema.items.enum) {\n          scope.entity[scope.schema.path] = scope.entity[scope.schema.path] || [];\n          template = $templateCache.get('schema-form/input_checkboxes.html');\n        } else {\n          scope.entity[scope.schema.path] = scope.entity[scope.schema.path] || [];\n          template = $templateCache.get('schema-form/input_array.html');\n        }\n        break;\n    }\n    \n    var content = $compile(angular.element(template))(scope);\n    \n    if (schema.style) {\n      content.addClass(schema.style);\n    }\n\n    element.append(content);\n  };\n\n  return {\n    scope: {\n      schema: '=',\n      entity: '=',\n      errors: '='\n    },\n    restrict: 'AE',\n    replace: true,\n    link: linker\n  };\n\n})\n;\n","/* global _ */\nangular\n.module('ngManager')\n.factory('$schemaNormalizer', function() {\n\n  var normalize = function(schema, path, key) {\n\n    // prevent normalizing twice\n    if (schema.$$normalized) {\n      return schema;\n    }\n\n    if (typeof schema === 'string') {\n      schema = { type: schema };\n    }\n\n    if (path) {\n      schema.path = path + '.' + key;\n    } else {\n      schema.path = key;\n    }\n\n    schema.key = key;\n\n    if (schema.type === 'object') {\n      // Normalize children\n      _.each(schema.properties, function(prop, key) {\n        schema.properties[key] = normalize(prop, path, key);\n      });\n      schema.keyOrder = _.keys(schema.properties);\n    }\n\n    if (schema.type === 'array') {\n      // Normalize children\n      _.each(schema.items, function(prop, key) {\n        schema.items[key] = normalize(prop, path, key);\n      });\n      schema.keyOrder = _.keys(schema.items);\n    }\n\n    // Mark as normalized\n    schema.$$normalized = true;\n\n    return schema;\n  };\n\n  return normalize;\n\n});\n","/* global tv4,_ */\nangular\n.module('ngManager')\n.factory('$schemaValidator', function() {\n      \n  /**\n  * formats\n  */\n  var formats = {\n    /**\n     * This SHOULD be a date in ISO 8601 format of YYYY-MM-DDThh:mm:ssZ in UTC time.\n     * This is the recommended form of date/timestamp.\n     *\n     * Also supports YYYY-MM-DDThh:mm:ss.SSSTZD (e.g. 2012-12-10T19:20:30.456+09:00)\n     */\n    'date-time': /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{1,3})?(?:Z|[+\\-]\\d{2}:\\d{2})$/,\n\n    /**\n     * This SHOULD be a date in the format of YYYY-MM-DD.\n     * It is recommended that you use the \"date-time\" format\n     * instead of \"date\" unless you need to transfer only the date part.\n     */\n    'date': /^\\d{4}-\\d{2}-\\d{2}$/,\n\n    /**\n     * This SHOULD be a time in the format of hh:mm:ss.\n     * It is recommended that you use the \"date-time\" format\n     * instead of \"time\" unless you need to transfer only the time part.\n     *\n     * Also supports hh:mm:ss.SSS (e.g. 19:20:30.456)\n     */\n    'time': /^\\d{2}:\\d{2}:\\d{2}(?:\\.\\d{1,3})?$/,\n\n    /**\n     * This SHOULD be the difference, measured in milliseconds,\n     * between the specified time and midnight, 00:00 of January 1, 1970 UTC.\n     * The value SHOULD be a number (integer or float).\n     */\n    'utc-millisec': function(input) { return !isNaN(parseInt(input,10));},\n\n    /**\n     * A regular expression, following the regular expression specification\n     * from ECMA 262/Perl 5.\n     */\n    'regex': function(input) {\n      try {\n        new RegExp(input);\n      } catch(e) {\n        return false;\n      }\n      return true;\n    },\n\n    /**\n     * This is a CSS color (like \"#FF0000\" or \"red\"),\n     * based on CSS 2.1 [W3C.CR-CSS21-20070719].\n     * rgb() format is also allowed.\n     * Not only 17 'basic color names specified in CSS 2.1, 143 'X11 color names' are also allowed.\n     */\n    'color': /^(?:(?:#?[0-9a-fA-F]{3,6})|(?:rgb\\(\\s*\\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(?:rgb\\(\\s*(?:\\d?\\d%|100%)\\s*,\\s*(?:\\d?\\d%|100%)\\s*,\\s*(?:\\d?\\d%|100%)\\s*\\))|(?:maroon|red|orange|yellow|olive|green|purple|fuchsia|lime|teal|aqua|blue|navy|black|gray|silver|white|indianred|lightcoral|salmon|darksalmon|lightsalmon|crimson|firebrick|darkred|pink|lightpink|hotpink|deeppink|mediumvioletred|palevioletred|lightsalmon|coral|tomato|orangered|darkorange|gold|lightyellow|lemonchiffon|lightgoldenrodyellow|papayawhip|moccasin|peachpuff|palegoldenrod|khaki|darkkhaki|lavender|thistle|plum|violet|orchid|magenta|mediumorchid|mediumpurple|amethyst|blueviolet|darkviolet|darkorchid|darkmagenta|indigo|slateblue|darkslateblue|mediumslateblue|greenyellow|chartreuse|lawngreen|limegreen|palegreen|lightgreen|mediumspringgreen|springgreen|mediumseagreen|seagreen|forestgreen|darkgreen|yellowgreen|olivedrab|darkolivegreen|mediumaquamarine|darkseagreen|lightseagreen|darkcyan|cyan|lightcyan|paleturquoise|aquamarine|turquoise|mediumturquoise|darkturquoise|cadetblue|steelblue|lightsteelblue|powderblue|lightblue|skyblue|lightskyblue|deepskyblue|dodgerblue|cornflowerblue|mediumslateblue|royalblue|mediumblue|darkblue|midnightblue|cornsilk|blanchedalmond|bisque|navajowhite|wheat|burlywood|tan|rosybrown|sandybrown|goldenrod|darkgoldenrod|peru|chocolate|saddlebrown|sienna|brown|snow|honeydew|mintcream|azure|aliceblue|ghostwhite|whitesmoke|seashell|beige|oldlace|floralwhite|ivory|antiquewhite|linen|lavenderblush|mistyrose|gainsboro|lightgrey|darkgray|dimgray|lightslategray|slategray|darkslategray))$/i,\n\n    /**\n     * This is a CSS style definition (like \"color: red; background-color:#FFF\"),\n     * based on CSS 2.1 [W3C.CR-CSS21-20070719].\n     */\n    'style': /^\\s*[^:]+\\s*:\\s*[^:;]+\\s*;{0,1}\\s*$/,\n\n    /**\n     * This value SHOULD be a URI.\n     *\n     * http://snipplr.com/view/6889/regular-expressions-for-uri-validationparsing/\n     */\n    'uri': /^(?:(?:[a-z0-9+.\\-]+:\\/\\/)(?:(?:(?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?(?:(?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)(?::(?:\\d*))?(?:\\/(?:[a-z0-9-._~!$&'()*+,;=:@\\/]|%[0-9A-F]{2})*)?|(?:[a-z0-9+.\\-]+:)(?:\\/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})+(?:[a-z0-9-._~!$&'()*+,;=:@\\/]|%[0-9A-F]{2})*)?)(?:\\?(?:[a-z0-9-._~!$&'()*+,;=:\\/?@]|%[0-9A-F]{2})*)?(?:#(?:[a-z0-9-._~!$&'()*+,;=:\\/?@]|%[0-9A-F]{2})*)?$/i,\n\n    /*\n     * This SHOULD be an email address.\n     *\n     * http://fightingforalostcause.net/misc/2006/compare-email-regex.php\n     */\n    'email': /^(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){255,})(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){65,}@)(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22))(?:\\.(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\\]))$/i,\n\n    /**\n     * This SHOULD be an ip version 4 address.\n     */\n    'ipv4': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n\n    /**\n     * This SHOULD be an ip version 6 address.\n     *\n     * http://home.deds.nl/~aeron/regex/\n     */\n    'ipv6': /^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/i,\n\n    /**\n     * This SHOULD be a host-name.\n     */\n    'host-name'\n      : /^(?:(?:[a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$/\n  };\n \n\n  _.each(formats, function(format, key) {\n\n    if (typeof format === 'function') {\n      tv4.addFormat(key, function(data) {\n        // do not check empty value\n        if (data === null || data === undefined || data.length === 0) {\n          return null;\n        }\n        if (format(data)) {\n          return null;\n        } else {\n          return 'must be valid format: ' + key;\n        }\n      });\n    } else {\n      tv4.addFormat(key, function(data) {\n        // do not check empty value\n        if (data === null || data === undefined || data.length === 0) {\n          return null;\n        }\n        if (format.test(data)) {\n          return null;\n        } else {\n          return 'must be valid ' + key;\n        }\n      });\n    }\n  });\n\n  var normalize = function(data) {\n\n    if (typeof data === 'object') {\n      // remove empty data\n      _.each(data, function(val, key) {\n        if (val === '' || val === undefined || val === null) {\n          delete data[key];\n        } else if (typeof val === 'object') {\n          normalize(data[key]);\n        }\n      });\n    }\n  };\n\n  return {\n\n    validate: function(data, schema, path) {\n\n      normalize(data);\n\n      var result = tv4.validateMultiple(data, schema);\n      if (result.valid) {\n        return null;\n      } else {\n        _.each(result.errors, function(err) {\n          var keyPath = '/';\n          if (err.dataPath) {\n            keyPath = err.dataPath;\n          }\n          if (err.params.key) {\n            keyPath = err.dataPath + '/' + err.params.key;\n          }\n          keyPath = keyPath.split('/');\n          keyPath.shift();\n          err.path = keyPath.join('.');\n        });\n        if (path) {\n          for (var i = 0; i < result.errors.length; i++) {\n            var err = result.errors[i];\n            if (err.path === path) {\n              return [err];\n            }\n          }\n          return null;\n        } else {\n          return result.errors;\n        }\n      }\n    }\n\n  };\n\n});\n\n","angular\n.module('ngManager')\n.service('$sideContent', function($rootElement,\n                                  $mdSidenav,\n                                  $mdTheming,\n                                  $animate,\n                                  $timeout,\n                                  $window,\n                                  $compile) {\n\n  var lastScope = null;\n  var lastElement = null;\n\n  return function(scope) {\n\n    if (lastScope) {\n      lastScope.$destroy();\n      lastElement.remove();\n      lastScope = null;\n    }\n\n    var element = $compile('<md-sidenav class=\"md-sidenav-right md-whiteframe-z2 side-form\" md-theme=\"side\" md-component-id=\"right-form\"><md-content layout=\"column\"><schema-form /></md-content></md-sidenav>')(scope);\n\n    var show = function() {\n      $rootElement.find('body').append(element);\n      $mdSidenav('right-form').toggle();\n      lastScope = scope;\n      lastElement = element;\n    };\n\n    var hide = function() {\n      $mdSidenav('right-form').close();\n    };\n\n    return {\n      show: show,\n      hide: hide\n    };\n  };\n});\n","angular\n.module('ngManager')\n.controller('TopCtrl', function($rootScope) {\n\n  $rootScope.$emit('content.title', {\n    section: 'Top'\n  });\n\n})\n;\n","(function() {\n  'use strict';\n\n  var app;\n\n  app = angular.module('datePicker', ['mgcrea.ngStrap', 'ngMaterial', 'ui.utils']);\n\n  app.directive('mdDatePicker', [    \n    '$datepicker', function($datepicker) {      \n      return {\n        template: '<div class=\"md-toolbar-tools dark\">' + ' <md-input-container ng-disabled=\"isDisabled\">' + '     <label>{{label}}</label>' + '    <input data-date-format=\"yyyy-MM-dd\" id=\"date-picker\" model-view-value=\"true\"' + '             ng-model=\"value\" bs-datepicker></md-input>' + '</md-input-container>' + '</div>',\n        restrict: 'E',\n        scope: {\n          lineColor: \"@\",\n          textColor: \"@\",\n          mask: \"@\"\n        },\n        link: function(scope, element, attrs) {\n          var picker;\n          picker = $(\"#date-picker\");\n          if (scope.textColor) {\n            picker.css(\"color\", scope.textColor, \"important\");\n          }\n          if (scope.lineColor) {\n            picker.css(\"border-color\", scope.lineColor, \"important\");\n          }\n        }\n      };\n    }\n  ]);\n\n}).call(this);\n"],"sourceRoot":"/source/"}